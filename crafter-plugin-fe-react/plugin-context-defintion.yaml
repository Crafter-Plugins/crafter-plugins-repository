contextApiVersion: plugins/context/v1
kind: ContextDefinition
metadata:
  name: ReactFrontendContext
spec:
  context_objects:
    services:
      selector:
        get_all_with_labels:
          labels:
            - frontend
          include_fields:
            - properties.name
            - properties.image_name
            - environment.port
            - metadata.labels
          for_each:
            context_objects:
              depends_on:
                selector:
                  get_neighbours_with_labels:
                    labels:
                      - frontend
                    include_fields:
                      - properties.name
                      - metadata.labels
                type: Array<object>
      type: Array<object>
    databases:
      get_all_with_labels:
          labels:
            - frontend
          include_fields:
            - properties.length
            - properties.name
            - properties.dbPassword
            - properties.dbHost
            - properties.dbUser
            - properties.port
    blueprint_name:
      selector:
        get_blueprint_name:
      type: string